function buildVisitedForDate(events, asOfLocalDate, atDate) {
-  const visited = events.filter(
-    (evt) =>
-      evt.Dateonly === asOfLocalDate &&
-      evt.LocaleMessageTime <= atDate &&
-      evt.Entered === 1
-  );
+  const visited = events.filter((evt) => {
+    const evtLocalDate = DateTime.fromJSDate(evt.LocaleMessageTime, {
+      zone: "utc",
+    })
+      .setZone("Asia/Kolkata")
+      .toFormat("yyyy-LL-dd");
+
+    return (
+      evtLocalDate === asOfLocalDate &&
+      evt.LocaleMessageTime <= atDate &&
+      evt.Entered === 1
+    );
+  });



......
..


function buildVisitedToday(events, asOfLocalDate, atDate) {
-  const visited = events.filter(
-    (evt) =>
-      evt.Dateonly === asOfLocalDate &&
-      evt.LocaleMessageTime <= atDate &&
-      evt.Entered === 1
-  );
+  const visited = events.filter((evt) => {
+    const evtLocalDate = DateTime.fromJSDate(evt.LocaleMessageTime, {
+      zone: "utc",
+    })
+      .setZone("Asia/Kolkata")
+      .toFormat("yyyy-LL-dd");
+
+    return (
+      evtLocalDate === asOfLocalDate &&
+      evt.LocaleMessageTime <= atDate &&
+      evt.Entered === 1
+    );
+  });