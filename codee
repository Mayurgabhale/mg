if (deviceType.includes("camera")) {
  const openWrap = document.createElement("div");
  openWrap.style.marginTop = "10px";
  openWrap.innerHTML = `
    <button class="open-camera-btn"
            style="background:#1976d2;color:#fff;border:none;border-radius:6px;
                   padding:8px 12px;cursor:pointer;font-weight:600;">
      <i class="fas fa-external-link-alt" style="margin-right:6px;"></i>
      Open Camera
    </button>
  `;
  card.appendChild(openWrap);

  const btn = openWrap.querySelector(".open-camera-btn");
  const cameraname = device.cameraname || device.controllername || device.archivername || device.servername || "";
  btn.addEventListener("click", () => openCamera(deviceIP, cameraname));
}











// --- Camera URL auto-detect helpers ---
function buildUrlFromHints(ip, cameraname = "") {
  const name = (cameraname || "").toLowerCase();

  // brand cues inside controllername / cameraname
  if (/\bverkada\b/.test(name)) return `https://${ip}/#/login`;
  if (/\bflir\b/.test(name))     return `http://${ip}/control/userimage.html`;
  if (/\bhoneywell\b/.test(name))return `http://${ip}/www/index.html`;
  if (/\baxis\b/.test(name))     return `http://${ip}/view/view.shtml`;

  // subnet heuristics (optional, edit to your network)
  if (ip.startsWith("10.199.16.")) return `http://${ip}/view/view.shtml`;
  if (ip.startsWith("10.199.11.")) return `https://${ip}/#/login`;

  // general fallback
  return `http://${ip}/www/index.html`;
}

function openCamera(ip, name) {
  const url = buildUrlFromHints(ip, name);
  window.open(url, "_blank", "noopener");
}






.....


if (deviceType.includes("camera")) {
  const openWrap = document.createElement("div");
  openWrap.style.marginTop = "10px";
  openWrap.innerHTML = `
    <button class="open-camera-btn"
            style="background:#1976d2;color:#fff;border:none;border-radius:6px;
                   padding:8px 12px;cursor:pointer;font-weight:600;">
      <i class="fas fa-external-link-alt" style="margin-right:6px;"></i>
      Open Camera
    </button>
  `;
  card.appendChild(openWrap);

  const btn = openWrap.querySelector(".open-camera-btn");
  const cameraname = device.cameraname || device.controllername || device.archivername || device.servername || "";
  btn.addEventListener("click", () => openCamera(deviceIP, cameraname));
}