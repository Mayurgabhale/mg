chartInst.current = new Chart(ctx, {
  type: 'line',
  data: { 
    labels: labels, 
    datasets: [{
      label: 'Flagged by Risk Level',
      data: values,
      borderColor: '#2563eb',       // blue line
      backgroundColor: 'rgba(37,99,235,0.2)', // light fill under line
      fill: true,                   // fill area under line
      tension: 0.3,                 // smooth the line
      pointBackgroundColor: colors, // use risk colors for points
      pointRadius: 5,
      pointHoverRadius: 7
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          label: function(context) {
            return context.parsed.y + ' cases';
          }
        }
      }
    },
    onClick: function (evt, elements) {
      if (elements && elements.length > 0) {
        var idx = elements[0].index;
        var label = this.data.labels[idx];
        handleRiskBarClick(label);
      }
    },
    scales: {
      y: { beginAtZero: true, ticks: { precision: 0 } }
    }
  }
});