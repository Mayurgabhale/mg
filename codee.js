
  "success": true,
  "today": {
    "total": 1106,
    "Employee": 934,
    "Contractor": 172
  },
  "realtime": {
    "Pune": {
      "total": 516,
      "Employee": 456,
      "Contractor": 60,
      "floors": {
        "Tower B": 123,
        "Podium Floor": 393
      },
      "zones": {
        "Tower B": 123,
        "Red Zone - Outer Area": 8,
        "Red Zone": 97,
        "Green Zone": 64,
        "Yellow Zone": 91,
        "Orange Zone": 88,
        "Reception Area": 17,
        "Yellow Zone - Outer Area": 20,
        "Orange Zone - Outer Area": 7,
        "Assembly Area": 1
      }
    },
    "Quezon City": {
      "total": 129,
      "Employee": 112,
      "Contractor": 17,
      "floors": {
        "7th Floor": 95,
        "6th Floor": 34
      },
      "zones": {
        "7th Floor": 95,
        "6th Floor": 34
      }
    },
    "JP.Tokyo": {
      "total": 11,
      "Employee": 10,
      "Contractor": 1,
      "floors": {
        "Tokyo": 11
      },
      "zones": {
        "Tokyo": 11
      }
    },
    "IN.HYD": {
      "total": 55,
      "Employee": 14,
      "Contractor": 41,
      "floors": {
        "Hyderabad": 55
      },
      "zones": {
        "HYD_2NDFLR": 55
      }
    },
    "MY.Kuala Lumpur": {
      "total": 10,
      "Employee": 9,
      "Contractor": 1,
      "floors": {
        "Kuala Lumpur": 10
      },
      "zones": {
        "Kuala Lumpur": 10
      }
    },
    "Taguig City": {
      "total": 16,
      "Employee": 13,
      "Contractor": 3,
      "floors": {
        "Taguig": 16
      },
      "zones": {
        "Taguig": 16
      }
    },
    "SG.Singapore": {
      "total": 20,
      "Employee": 20,
      "Contractor": 0,
      "floors": {

      },
      "zones": {
        "Singapore": 20
      }
    }
  },
see this code

"APAC_PH_Manila_7th Floor_Directors Office-708___OutDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Exit Corridore-704___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Exit Corridore-704___OutDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_IT Work Room  725___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_IT Work Room  725___OutDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_MDF-726 Restricted Door___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_MDF-726 Restricted Door___OutDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Open Office Door 1-721___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Open Office Door 1-721___OutDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Open Office Door 2-721___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Open Office Door 2-721___OutDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Pantry-720a___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Pantry-720a___OutDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Recption Door 1-701___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Recption Door 1-701___OutDirection": "Out of office",
  "APAC_PH_Manila_7th Floor_Recption Door 2-701___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Recption Door 2-701___OutDirection": "Out of office",
  "APAC_PH_Manila_7th Floor_Security Room-723___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor_Security Room-723___OutDirection": "7th Floor",

  // PI Manila DR (Taguig)
  "APAC_PI_Manila_DR_MainEntrance___InDirection": "Taguig",
  "APAC_PI_Manila_DR_MainEntrance___OutDirection": "Out of office",
  "APAC_PI_Manila_DR_OfficeLobby___InDirection": "Taguig",
  "APAC_PI_Manila_DR_OfficeLobby___OutDirection": "Out of office",
  "APAC_PI_Manila_DR_Server Restricted Door___InDirection": "Taguig",
  "APAC_PI_Manila_DR_Server Restricted Door___OutDirection": "Taguig",
  "APAC_PI_Manila_DR_StorageRm___InDirection": "Taguig",
  "APAC_PI_Manila_DR_StorageRm___OutDirection": "Taguig",
  "APAC_PI_Manila_Emerg Exit Dr- Lobby___InDirection": "Taguig",
  "APAC_PI_Manila_Emerg Exit Dr- Lobby___OutDirection": "Taguig",
  "APAC_PI_Manila_Emgerg DR_Storage RM___InDirection": "Taguig",
  "APAC_PI_Manila_Emgerg DR_Storage RM___OutDirection": "Taguig",




  // --- Manila 7th Floor Reception Doors ---
  "APAC_PH_Manila_7th Floor Recption Door 1-701___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor Recption Door 1-701___OutDirection": "Out of office",

  "APAC_PH_Manila_7th Floor Recption Door 2-701___InDirection": "7th Floor",
  "APAC_PH_Manila_7th Floor Recption Door 2-701___OutDirection": "Out of office",

  // --- Manila 7th Floor Open Office Door 2-721 ---
  "APAC_IN_HYD_2NDFLR_IT STORE ROOM___InDirection": "HYD_2NDFLR",


  "APAC_IN_HYD_2NDFLR_AHU ROOM 2___InDirection": "HYD_2NDFLR",


  "APAC_IN_HYD_2NDFLR_AHU ROOM 1___InDirection": "HYD_2NDFLR",


  "APAC_IN_HYD_2NDFLR_F&A WING SIDE ENTRY 1___InDirection": "HYD_2NDFLR",
  "APAC_IN_HYD_2NDFLR_F&A WING SIDE ENTRY 1___OutDirection": "Out of Office",

  "APAC_IN_HYD_2NDFLR_MAIN LIFT LOBBY ENTRY 2___InDirection": "HYD_2NDFLR",
  "APAC_IN_HYD_2NDFLR_MAIN LIFT LOBBY ENTRY 2___OutDirection": "Out of Office",


  //Singapore

  "APAC_SG_11 FLR_BackDR___InDirection":"Singapore",
  "APAC_SG_11 FLR_BackDR___OutDirection":"Out of Office",

  "APAC_SG_11 FLR_Main Door___InDirection":"Singapore",
  "APAC_SG_11 FLR_Main Door___OutDirection:":"Out of Office",

  "APAC_SG_WU_11 FLR_Server Door___InDirection":"Singapore",
  "APAC_SG_WU_11 FLR_Server Door___OutDirection":"Singapore",




};




// 2) zone → floor
const zoneFloorMap = {

  "Red Zone": "Podium Floor",
  "Yellow Zone": "Podium Floor",
  "Reception Area": "Podium Floor",
  "Green Zone": "Podium Floor",
  "Orange Zone": "Podium Floor",
  "Gsoc Zone": "Podium Floor",
  "Assembly Area": "Podium Floor",
  "Red": "Podium Floor",

  // 2nd Floor
  "2nd Floor, Pune": "2nd Floor",

  // Tower B
  "Tower B": "Tower B",
  "Reception Area Tower B": "Tower B",
  "Tower B GYM": "Tower B",

  // Outer‐Area variants (same floors as their base zones)
  "Red Zone - Outer Area": "Podium Floor",
  "Yellow Zone - Outer Area": "Podium Floor",
  "Reception Area - Outer Area": "Podium Floor",
  "Green Zone - Outer Area": "Podium Floor",
  "Orange Zone - Outer Area": "Podium Floor",
  "Assembly Area - Outer Area": "Podium Floor",
  "2nd Floor, Pune - Outer Area": "2nd Floor",
  "Tower B - Outer Area": "Tower B",
  "Reception Area Tower B - Outer Area": "Tower B",
  "Tower B GYM - Outer Area": "Tower B",

  // True “Out of office” eviction (we filter these out in the controller)


  "Kuala Lumpur": "Kuala Lumpur",
  "6th Floor": "6th Floor",
  "7th Floor": "7th Floor",
  "Tokyo": "Tokyo",
  "Taguig": "Taguig",
  // All true “Out of office” go to Unknown:
  "Out of office": null,

  "HYD_2NDFLR":"Hyderabad",
  "APAC_SG":"Singapore"


};


// 3) How to derive partition for PartitionName2
// 3) Partition → friendly name
const partitionMap = {
  'APAC_IN_PUN': 'Pune',
  'APAC_PH_Manila': 'Quezon City',
  'APAC_JPN_Tokyo': 'JP.Tokyo',
  'APAC_MY_KL': 'MY.Kuala Lumpur',
  'APAC_PI_Manila': 'Taguig City',
  'APAC_IN_HYD_2NDFLR':'IN.HYD',
  'APAC_SG_11 FLR':'SG.Singapore'
};



function normalizeDoorName(name) {
  return name
    .replace(/[_/]/g, ' ')                      // underscores/slashes → spaces
    .replace(/[^\w\s-]/g, '')                   // drop punctuation except hyphens
    .replace(/\bRECPTION\b/gi, 'RECEPTION')     // typo fix
    .replace(/\bENRTY\b|\bENTRTY\b/gi, 'ENTRY') // typo fix
    // strip any trailing 6-digit hex string (e.g. "10054B")
    .replace(/\b[0-9A-F]{6}\b$/, '')
    .replace(/[\s-]+/g, ' ')                    // collapse spaces & hyphens
    .toUpperCase()
    .trim();
}



// 5) Build normalized door→zone lookup
const normalizedDoorZoneMap = Object.entries(doorZoneMap).reduce((acc, [rawKey, zone]) => {
  const [rawDoor, direction] = rawKey.split('___');
  const normKey = `${normalizeDoorName(rawDoor)}___${direction}`;
  acc[normKey] = zone;
  return acc;
}, {});

// 6) Build per-partition doorMap entries
const doorMap = Object.entries(doorZoneMap).reduce((acc, [rawKey, zone]) => {
  const [rawDoor, direction] = rawKey.split('___');
  const prefix = rawDoor.split('_').slice(0, 3).join('_');
  const partition = partitionMap[prefix] || prefix;
  const floor = zoneFloorMap[zone] || 'Unknown';

  if (!acc[rawDoor]) {
    acc[rawDoor] = {
      partition,
      door: rawDoor,
      inDirectionFloor: null,
      outDirectionFloor: null,
      normalizedDoor: normalizeDoorName(rawDoor)
    };
  }
  if (direction === 'InDirection') acc[rawDoor].inDirectionFloor = floor;
  else acc[rawDoor].outDirectionFloor = floor;

  return acc;
}, {});

// 7) Export
module.exports = {
  doorZoneMap,
  normalizedDoorZoneMap,
  zoneFloorMap,
  doorMap: Object.values(doorMap),
  normalizeDoorName
};

